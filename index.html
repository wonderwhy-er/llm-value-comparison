<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Value Comparison: Local vs Cloud</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0f0f1a 100%);
            color: #e0e0e0;
            font-family: 'JetBrains Mono', monospace;
            padding: 2rem;
            line-height: 1.6;
        }
        
        h1 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, #00ff88, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 2rem;
            font-size: 0.9rem;
        }
        
        .container { max-width: 1400px; margin: 0 auto; }
        
        /* Global settings bar */
        .global-settings {
            background: rgba(255, 200, 0, 0.1);
            border: 1px solid rgba(255, 200, 0, 0.3);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 2rem;
            flex-wrap: wrap;
        }
        .global-settings label { color: #ffc800; font-weight: 600; }
        .global-settings select {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255, 200, 0, 0.4);
            color: #ffc800;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-family: inherit;
        }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem; }
        @media (max-width: 1000px) { .grid { grid-template-columns: 1fr; } }
        
        .card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 1.5rem;
        }
        
        .card h2 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .local-color { color: #00ff88; }
        .cloud-color { color: #7c3aed; }
        
        .form-group { margin-bottom: 1rem; }
        .form-group label {
            display: block;
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 0.3rem;
        }
        
        select, input[type="number"] {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: #e0e0e0;
            padding: 0.6rem 1rem;
            font-family: inherit;
            font-size: 0.9rem;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: #00ff88;
        }
        
        .row { display: flex; gap: 1rem; }
        .row .form-group { flex: 1; }
        
        /* CALCULATION BOX - the key feature */
        .calc-box {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.25rem;
            margin-top: 1.5rem;
            font-size: 0.85rem;
        }
        .calc-box h3 {
            font-size: 0.9rem;
            margin-bottom: 1rem;
            color: #888;
        }
        
        .calc-step {
            margin-bottom: 0.75rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .calc-step:last-child { border-bottom: none; }
        .calc-formula {
            font-family: 'JetBrains Mono', monospace;
            color: #aaa;
        }
        .calc-formula .num { color: #ffc800; font-weight: 600; }
        .calc-formula .op { color: #666; }
        .calc-result {
            margin-top: 0.3rem;
            font-weight: 600;
        }
        .calc-result.local { color: #00ff88; }
        .calc-result.cloud { color: #7c3aed; }
        
        .final-value {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            text-align: center;
        }
        .final-value .label { color: #888; font-size: 0.8rem; }
        .final-value .value {
            font-size: 2rem;
            font-weight: 700;
            margin-top: 0.25rem;
        }
        .final-value .unit { font-size: 0.9rem; color: #666; }
        
        /* Comparison */
        .comparison-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 2rem;
        }
        .comparison-card h2 { text-align: center; margin-bottom: 1.5rem; }
        
        .bar-row { margin-bottom: 1.5rem; }
        .bar-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }
        .bar-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            height: 40px;
            overflow: hidden;
        }
        .bar-fill {
            height: 100%;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 12px;
            font-weight: 600;
            font-size: 0.85rem;
            transition: width 0.5s ease;
            min-width: 80px;
        }
        .bar-fill.local { background: linear-gradient(90deg, #00ff88, #00cc6a); color: #000; }
        .bar-fill.cloud { background: linear-gradient(90deg, #7c3aed, #9f67ff); color: #fff; }
        
        .winner-box {
            text-align: center;
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1.5rem;
        }
        .winner-box.local { background: rgba(0, 255, 136, 0.1); border: 2px solid rgba(0, 255, 136, 0.3); }
        .winner-box.cloud { background: rgba(124, 58, 237, 0.1); border: 2px solid rgba(124, 58, 237, 0.3); }
        .winner-box.tie { background: rgba(255, 200, 0, 0.1); border: 2px solid rgba(255, 200, 0, 0.3); }
        
        .winner-title { font-size: 0.85rem; color: #888; }
        .winner-name { font-size: 1.5rem; font-weight: 700; margin: 0.5rem 0; }
        .winner-detail { font-size: 0.9rem; opacity: 0.8; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ö° LLM Value Comparison</h1>
        <p class="subtitle">Local Hardware vs Cloud Subscriptions ‚Äî See exactly how the math works</p>
        
        <!-- GLOBAL SETTINGS -->
        <div class="global-settings">
            <div>
                <label>‚è±Ô∏è Comparison Period:</label>
                <select id="periodYears">
                    <option value="1">1 Year</option>
                    <option value="2" selected>2 Years</option>
                    <option value="3">3 Years</option>
                    <option value="4">4 Years</option>
                    <option value="5">5 Years</option>
                </select>
            </div>
            <div style="color: #888; font-size: 0.85rem;">
                Both local hardware cost and cloud subscription are calculated over the same period for fair comparison.
            </div>
        </div>
        
        <div class="grid">
            <!-- LOCAL SETUP -->
            <div class="card">
                <h2><span class="local-color">üñ•Ô∏è</span> Local Setup</h2>
                
                <div class="form-group">
                    <label>Hardware</label>
                    <select id="hardware">
                        <option value="2500" data-speed="1.0">RTX 3090 Build ($2,500)</option>
                        <option value="4000" data-speed="1.8">RTX 4090 Build ($4,000)</option>
                        <option value="5500" data-speed="2.5">RTX 5090 Build ($5,500)</option>
                        <option value="4000" data-speed="0.7">Mac M3 Max 64GB ($4,000)</option>
                        <option value="6000" data-speed="0.9">Mac M4 Max 128GB ($6,000)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Custom Hardware Cost ($) ‚Äî optional override</label>
                    <input type="number" id="customHardware" placeholder="e.g. 3000">
                </div>
                
                <div class="form-group">
                    <label>Local Model</label>
                    <select id="localModel">
                        <option value="100" data-quality="68">GPT-OSS-20B (100 tok/s, 68% quality)</option>
                        <option value="60" data-quality="72">GLM-4.7 Flash (60 tok/s, 72% quality)</option>
                        <option value="25" data-quality="82">Llama 3.1 70B Q4 (25 tok/s, 82% quality)</option>
                        <option value="45" data-quality="78">Qwen 2.5 32B (45 tok/s, 78% quality)</option>
                        <option value="80" data-quality="65">Mistral 7B (80 tok/s, 65% quality)</option>
                    </select>
                </div>
                
                <div class="row">
                    <div class="form-group">
                        <label>Custom tok/sec</label>
                        <input type="number" id="customSpeed" placeholder="e.g. 100">
                    </div>
                    <div class="form-group">
                        <label>Custom Quality %</label>
                        <input type="number" id="customLocalQuality" placeholder="e.g. 70" min="0" max="100">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Hours of use per day</label>
                    <input type="number" id="hoursPerDay" value="8" min="1" max="24">
                </div>
                
                <!-- EXPLICIT CALCULATION -->
                <div class="calc-box">
                    <h3>üìê Calculation (step by step)</h3>
                    
                    <div class="calc-step">
                        <div class="calc-formula">
                            <span class="num" id="l_toksec">100</span> tok/sec 
                            <span class="op">√ó</span> <span class="num">3600</span> sec/hr 
                            <span class="op">√ó</span> <span class="num" id="l_hours">8</span> hrs/day
                        </div>
                        <div class="calc-result local">= <span id="l_tokday">2,880,000</span> tokens/day</div>
                    </div>
                    
                    <div class="calc-step">
                        <div class="calc-formula">
                            <span class="num" id="l_tokday2">2,880,000</span> tok/day 
                            <span class="op">√ó</span> <span class="num" id="l_quality">0.68</span> quality
                        </div>
                        <div class="calc-result local">= <span id="l_adjusted">1,958,400</span> quality-adjusted tokens/day</div>
                    </div>
                    
                    <div class="calc-step">
                        <div class="calc-formula">
                            <span class="num" id="l_adjusted2">1,958,400</span> tok/day 
                            <span class="op">√ó</span> <span class="num">365</span> days 
                            <span class="op">√ó</span> <span class="num" id="l_years">2</span> years
                        </div>
                        <div class="calc-result local">= <span id="l_total">1.43B</span> total quality-adjusted tokens</div>
                    </div>
                    
                    <div class="calc-step">
                        <div class="calc-formula">
                            <span class="num" id="l_totaltok">1.43B</span> tokens 
                            <span class="op">/</span> $<span class="num" id="l_hwcost">2,500</span> hardware cost
                        </div>
                        <div class="calc-result local">= <span id="l_tokperdollar">572,000</span> quality-adjusted tokens per $1</div>
                    </div>
                    
                    <div class="final-value">
                        <div class="label">VALUE SCORE (tokens per dollar)</div>
                        <div class="value local-color"><span id="l_final">572K</span></div>
                        <div class="unit">quality-adjusted tokens per $1 over <span id="l_periodlabel">2</span> years</div>
                    </div>
                </div>
            </div>
            
            <!-- CLOUD SETUP -->
            <div class="card">
                <h2><span class="cloud-color">‚òÅÔ∏è</span> Cloud Subscription</h2>
                
                <div class="form-group">
                    <label>Cloud Service</label>
                    <select id="cloudModel">
                        <option value="20" data-tokens="220000" data-quality="88" data-limit="day" data-note="~44K/5hr √ó 5 resets">Claude Pro ($20/mo) - Sonnet</option>
                        <option value="100" data-tokens="440000" data-quality="95" data-limit="day" data-note="~88K/5hr √ó 5 resets">Claude Max 5√ó ($100/mo) - Opus</option>
                        <option value="200" data-tokens="1100000" data-quality="95" data-limit="day" data-note="~220K/5hr √ó 5 resets">Claude Max 20√ó ($200/mo) - Opus</option>
                        <option value="20" data-tokens="80000" data-quality="85" data-limit="day">ChatGPT Plus ($20/mo)</option>
                        <option value="200" data-tokens="500000" data-quality="90" data-limit="day">ChatGPT Pro ($200/mo)</option>
                        <option value="20" data-tokens="100000" data-quality="83" data-limit="day">Gemini Advanced ($20/mo)</option>
                    </select>
                </div>
                
                <div class="form-group" style="background: rgba(255,200,0,0.1); padding: 0.75rem; border-radius: 8px; font-size: 0.75rem; color: #ccc;">
                    <strong style="color: #ffc800;">‚ö†Ô∏è Claude limits:</strong> Based on 5-hour rolling windows. 
                    Pro: ~44K/5hr, Max 5√ó: ~88K/5hr, Max 20√ó: ~220K/5hr. 
                    Assuming ~5 resets/day for daily estimate. Real usage may be 30-50% lower due to throttles.
                </div>
                
                <div class="row">
                    <div class="form-group">
                        <label>Custom $/month</label>
                        <input type="number" id="customCloudPrice" placeholder="e.g. 100">
                    </div>
                    <div class="form-group">
                        <label>Custom Quality %</label>
                        <input type="number" id="customCloudQuality" placeholder="e.g. 95" min="0" max="100">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Token Limit Type</label>
                    <select id="limitType">
                        <option value="day">Per Day</option>
                        <option value="week">Per Week</option>
                        <option value="month">Per Month</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Token Limit Amount</label>
                    <input type="number" id="tokenLimit" placeholder="e.g. 220000">
                </div>
                
                <div class="form-group">
                    <label>Usage Efficiency (account for throttles/resets)</label>
                    <select id="usageEfficiency">
                        <option value="1.0">100% - Theoretical max (optimistic)</option>
                        <option value="0.7" selected>70% - Realistic usage</option>
                        <option value="0.5">50% - Conservative (heavy throttling)</option>
                    </select>
                </div>
                
                <!-- EXPLICIT CALCULATION -->
                <div class="calc-box">
                    <h3>üìê Calculation (step by step)</h3>
                    
                    <div class="calc-step">
                        <div class="calc-formula">
                            <span class="num" id="c_rawtokens">45,000</span> tokens/<span id="c_limittype">day</span>
                            <span id="c_conversion"></span>
                        </div>
                        <div class="calc-result cloud">= <span id="c_tokday">45,000</span> tokens/day</div>
                    </div>
                    
                    <div class="calc-step">
                        <div class="calc-formula">
                            <span class="num" id="c_tokday2">45,000</span> tok/day 
                            <span class="op">√ó</span> <span class="num" id="c_quality">0.95</span> quality
                        </div>
                        <div class="calc-result cloud">= <span id="c_adjusted">42,750</span> quality-adjusted tokens/day</div>
                    </div>
                    
                    <div class="calc-step">
                        <div class="calc-formula">
                            <span class="num" id="c_adjusted2">42,750</span> tok/day 
                            <span class="op">√ó</span> <span class="num">365</span> days 
                            <span class="op">√ó</span> <span class="num" id="c_years">2</span> years
                        </div>
                        <div class="calc-result cloud">= <span id="c_total">31.2M</span> total quality-adjusted tokens</div>
                    </div>
                    
                    <div class="calc-step">
                        <div class="calc-formula">
                            $<span class="num" id="c_monthly">100</span>/mo 
                            <span class="op">√ó</span> <span class="num">12</span> mo 
                            <span class="op">√ó</span> <span class="num" id="c_years2">2</span> years
                        </div>
                        <div class="calc-result cloud">= $<span id="c_totalcost">2,400</span> total subscription cost</div>
                    </div>
                    
                    <div class="calc-step">
                        <div class="calc-formula">
                            <span class="num" id="c_totaltok">31.2M</span> tokens 
                            <span class="op">/</span> $<span class="num" id="c_totalcost2">2,400</span> subscription cost
                        </div>
                        <div class="calc-result cloud">= <span id="c_tokperdollar">13,000</span> quality-adjusted tokens per $1</div>
                    </div>
                    
                    <div class="final-value">
                        <div class="label">VALUE SCORE (tokens per dollar)</div>
                        <div class="value cloud-color"><span id="c_final">13K</span></div>
                        <div class="unit">quality-adjusted tokens per $1 over <span id="c_periodlabel">2</span> years</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- COMPARISON -->
        <div class="comparison-card">
            <h2>üìä Head-to-Head Comparison</h2>
            
            <div class="bar-row">
                <div class="bar-label">
                    <span class="local-color">üñ•Ô∏è Local: Tokens per Dollar</span>
                    <span id="localBarLabel">572K</span>
                </div>
                <div class="bar-container">
                    <div class="bar-fill local" id="localBar" style="width: 50%"></div>
                </div>
            </div>
            
            <div class="bar-row">
                <div class="bar-label">
                    <span class="cloud-color">‚òÅÔ∏è Cloud: Tokens per Dollar</span>
                    <span id="cloudBarLabel">13K</span>
                </div>
                <div class="bar-container">
                    <div class="bar-fill cloud" id="cloudBar" style="width: 50%"></div>
                </div>
            </div>
            
            <div class="winner-box" id="winnerBox">
                <div class="winner-title">BETTER VALUE</div>
                <div class="winner-name" id="winnerName">üñ•Ô∏è LOCAL</div>
                <div class="winner-detail" id="winnerDetail">45√ó more quality-adjusted tokens for similar cost</div>
            </div>
        </div>
    </div>

    <script>
        function formatNum(n) {
            if (n >= 1e12) return (n / 1e12).toFixed(2) + 'T';
            if (n >= 1e9) return (n / 1e9).toFixed(2) + 'B';
            if (n >= 1e6) return (n / 1e6).toFixed(2) + 'M';
            if (n >= 1e3) return (n / 1e3).toFixed(1) + 'K';
            return n.toFixed(0);
        }
        
        function formatMoney(n) {
            if (n >= 1e6) return '$' + (n / 1e6).toFixed(2) + 'M';
            if (n >= 1e3) return '$' + (n / 1e3).toFixed(1) + 'K';
            return '$' + n.toFixed(0);
        }
        
        function calculate() {
            const years = parseInt(document.getElementById('periodYears').value);
            
            // === LOCAL ===
            const hwSelect = document.getElementById('hardware');
            const hwOption = hwSelect.options[hwSelect.selectedIndex];
            const hwPrice = parseFloat(document.getElementById('customHardware').value) || parseFloat(hwOption.value);
            const speedMult = parseFloat(hwOption.dataset.speed);
            
            const localSelect = document.getElementById('localModel');
            const localOption = localSelect.options[localSelect.selectedIndex];
            const baseSpeed = parseFloat(document.getElementById('customSpeed').value) || parseFloat(localOption.value);
            const localQuality = (parseFloat(document.getElementById('customLocalQuality').value) || parseFloat(localOption.dataset.quality)) / 100;
            
            const hours = parseFloat(document.getElementById('hoursPerDay').value) || 8;
            const effectiveSpeed = baseSpeed * speedMult;
            
            // Local calculations
            const localTokPerDay = effectiveSpeed * 3600 * hours;
            const localAdjustedPerDay = localTokPerDay * localQuality;
            const localTotalTokens = localAdjustedPerDay * 365 * years;
            const localCostPerToken = hwPrice / localTotalTokens;
            
            // Local: tokens per dollar
            const localTokensPerDollar = localTotalTokens / hwPrice;
            
            // Update LOCAL display
            document.getElementById('l_toksec').textContent = effectiveSpeed.toFixed(0);
            document.getElementById('l_hours').textContent = hours;
            document.getElementById('l_tokday').textContent = formatNum(localTokPerDay);
            document.getElementById('l_tokday2').textContent = formatNum(localTokPerDay);
            document.getElementById('l_quality').textContent = localQuality.toFixed(2);
            document.getElementById('l_adjusted').textContent = formatNum(localAdjustedPerDay);
            document.getElementById('l_adjusted2').textContent = formatNum(localAdjustedPerDay);
            document.getElementById('l_years').textContent = years;
            document.getElementById('l_total').textContent = formatNum(localTotalTokens);
            document.getElementById('l_hwcost').textContent = hwPrice.toLocaleString();
            document.getElementById('l_totaltok').textContent = formatNum(localTotalTokens);
            document.getElementById('l_tokperdollar').textContent = formatNum(localTokensPerDollar);
            document.getElementById('l_periodlabel').textContent = years;
            document.getElementById('l_final').textContent = formatNum(localTokensPerDollar);
            
            // === CLOUD ===
            const cloudSelect = document.getElementById('cloudModel');
            const cloudOption = cloudSelect.options[cloudSelect.selectedIndex];
            const monthlyPrice = parseFloat(document.getElementById('customCloudPrice').value) || parseFloat(cloudOption.value);
            const cloudQuality = (parseFloat(document.getElementById('customCloudQuality').value) || parseFloat(cloudOption.dataset.quality)) / 100;
            
            // Token limit handling
            const limitType = document.getElementById('limitType').value;
            let rawTokens = parseFloat(document.getElementById('tokenLimit').value) || parseFloat(cloudOption.dataset.tokens);
            const efficiency = parseFloat(document.getElementById('usageEfficiency').value);
            
            let tokensPerDay;
            let conversionText = '';
            if (limitType === 'day') {
                tokensPerDay = rawTokens;
            } else if (limitType === 'week') {
                tokensPerDay = Math.floor(rawTokens / 7);
                conversionText = ' <span class="op">√∑</span> <span class="num">7</span> days';
            } else if (limitType === 'month') {
                tokensPerDay = Math.floor(rawTokens / 30);
                conversionText = ' <span class="op">√∑</span> <span class="num">30</span> days';
            }
            
            // Apply efficiency factor
            const effectiveTokensPerDay = tokensPerDay * efficiency;
            
            // Cloud calculations
            const cloudAdjustedPerDay = effectiveTokensPerDay * cloudQuality;
            const cloudTotalTokens = cloudAdjustedPerDay * 365 * years;
            const cloudTotalCost = monthlyPrice * 12 * years;
            const cloudTokensPerDollar = cloudTotalTokens / cloudTotalCost;
            
            // Update CLOUD display
            document.getElementById('c_rawtokens').textContent = rawTokens.toLocaleString();
            document.getElementById('c_limittype').textContent = limitType;
            document.getElementById('c_conversion').innerHTML = conversionText + (efficiency < 1 ? ' <span class="op">√ó</span> <span class="num">' + (efficiency*100) + '%</span> efficiency' : '');
            document.getElementById('c_tokday').textContent = effectiveTokensPerDay.toLocaleString();
            document.getElementById('c_tokday2').textContent = effectiveTokensPerDay.toLocaleString();
            document.getElementById('c_quality').textContent = cloudQuality.toFixed(2);
            document.getElementById('c_adjusted').textContent = formatNum(cloudAdjustedPerDay);
            document.getElementById('c_adjusted2').textContent = formatNum(cloudAdjustedPerDay);
            document.getElementById('c_years').textContent = years;
            document.getElementById('c_years2').textContent = years;
            document.getElementById('c_total').textContent = formatNum(cloudTotalTokens);
            document.getElementById('c_monthly').textContent = monthlyPrice;
            document.getElementById('c_totalcost').textContent = cloudTotalCost.toLocaleString();
            document.getElementById('c_totaltok').textContent = formatNum(cloudTotalTokens);
            document.getElementById('c_totalcost2').textContent = cloudTotalCost.toLocaleString();
            document.getElementById('c_tokperdollar').textContent = formatNum(cloudTokensPerDollar);
            document.getElementById('c_periodlabel').textContent = years;
            document.getElementById('c_final').textContent = formatNum(cloudTokensPerDollar);
            
            // === COMPARISON ===
            const maxValue = Math.max(localTokensPerDollar, cloudTokensPerDollar);
            const localPct = (localTokensPerDollar / maxValue) * 100;
            const cloudPct = (cloudTokensPerDollar / maxValue) * 100;
            
            document.getElementById('localBar').style.width = localPct + '%';
            document.getElementById('cloudBar').style.width = cloudPct + '%';
            document.getElementById('localBarLabel').textContent = formatNum(localTokensPerDollar) + ' tok/$';
            document.getElementById('cloudBarLabel').textContent = formatNum(cloudTokensPerDollar) + ' tok/$';
            
            // Winner
            const winnerBox = document.getElementById('winnerBox');
            const ratio = localTokensPerDollar / cloudTokensPerDollar;
            
            if (ratio > 1.05) {
                winnerBox.className = 'winner-box local';
                document.getElementById('winnerName').textContent = 'üñ•Ô∏è LOCAL WINS';
                document.getElementById('winnerName').style.color = '#00ff88';
                document.getElementById('winnerDetail').textContent = 
                    ratio.toFixed(1) + '√ó more tokens per dollar';
            } else if (ratio < 0.95) {
                winnerBox.className = 'winner-box cloud';
                document.getElementById('winnerName').textContent = '‚òÅÔ∏è CLOUD WINS';
                document.getElementById('winnerName').style.color = '#7c3aed';
                document.getElementById('winnerDetail').textContent = 
                    (1/ratio).toFixed(1) + '√ó more tokens per dollar';
            } else {
                winnerBox.className = 'winner-box tie';
                document.getElementById('winnerName').textContent = 'ü§ù ROUGHLY EQUAL';
                document.getElementById('winnerName').style.color = '#ffc800';
                document.getElementById('winnerDetail').textContent = 
                    'Similar value per dollar';
            }
        }
        
        // Event listeners
        document.querySelectorAll('select, input').forEach(el => {
            el.addEventListener('input', calculate);
            el.addEventListener('change', calculate);
        });
        
        // Sync token limit from cloud model selection
        document.getElementById('cloudModel').addEventListener('change', function() {
            const opt = this.options[this.selectedIndex];
            document.getElementById('tokenLimit').value = '';
            document.getElementById('tokenLimit').placeholder = opt.dataset.tokens;
            document.getElementById('limitType').value = opt.dataset.limit || 'day';
        });
        
        // Initial
        calculate();
    </script>
</body>
</html>
